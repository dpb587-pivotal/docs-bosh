



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.1">
    
    
      
        <title>Creating a Release</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#prep" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Cloud Foundry BOSH" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Cloud Foundry BOSH
              </span>
              <span class="md-header-nav__topic">
                Creating a Release
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/cloudfoundry/docs-bosh/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cloudfoundry/docs-bosh
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href=".." title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../cli-v2-install/" title="Installation" class="md-tabs__link">
          Installation
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../update-cloud-config/" title="Guides" class="md-tabs__link">
          Guides
        </a>
      
    </li>
  

  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../terminology/" title="Reference" class="md-tabs__link">
          Reference
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../stemcells/" title="Stemcells" class="md-tabs__link">
          Stemcells
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../releases/" title="Releases" class="md-tabs__link">
          Releases
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/logo.png" width="48" height="48">
      
    </span>
    Cloud Foundry BOSH
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/cloudfoundry/docs-bosh/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cloudfoundry/docs-bosh
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1"
          type="checkbox" id="nav-1" />
    

    
    <label class="md-nav__link" for="nav-1">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href=".." title="Welcome"
        class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../problems/" title="Project Goals"
        class="md-nav__link">
      Project Goals
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../community/" title="Community"
        class="md-nav__link">
      Community
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



    
      
      
      







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2"
          type="checkbox" id="nav-2" />
    

    
    <label class="md-nav__link" for="nav-2">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-v2-install/" title="Installing the CLI"
        class="md-nav__link">
      Installing the CLI
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start"
        class="md-nav__link">
      Quick Start
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-aws/" title="Amazon Web Services"
        class="md-nav__link">
      Amazon Web Services
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-google/" title="Google Cloud Platform"
        class="md-nav__link">
      Google Cloud Platform
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-azure/" title="Microsoft Azure"
        class="md-nav__link">
      Microsoft Azure
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-openstack/" title="OpenStack"
        class="md-nav__link">
      OpenStack
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-softlayer/" title="SoftLayer"
        class="md-nav__link">
      SoftLayer
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../bosh-lite/" title="VirtualBox"
        class="md-nav__link">
      VirtualBox
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-vcloud/" title="VMware vCloud"
        class="md-nav__link">
      VMware vCloud
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-vsphere/" title="VMware vSphere"
        class="md-nav__link">
      VMware vSphere
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



    
      
      
      




  




  <li class="md-nav__item md-nav__item--active md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3"
          type="checkbox" id="nav-3" checked />
    

    
    <label class="md-nav__link" for="nav-3">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1"
          type="checkbox" id="nav-3-1" />
    

    
    <label class="md-nav__link" for="nav-3-1">
      Deploying Software
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Deploying Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-1"
          type="checkbox" id="nav-3-1-1" />
    

    
    <label class="md-nav__link" for="nav-3-1-1">
      Core Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-1">
        Core Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../update-cloud-config/" title="Updating Cloud Config"
        class="md-nav__link">
      Updating Cloud Config
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../deployment-basics/" title="Building a Manifest"
        class="md-nav__link">
      Building a Manifest
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../uploading-stemcells/" title="Uploading Stemcells"
        class="md-nav__link">
      Uploading Stemcells
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../uploading-releases/" title="Uploading Releases"
        class="md-nav__link">
      Uploading Releases
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../deploying/" title="Deploying"
        class="md-nav__link">
      Deploying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-2"
          type="checkbox" id="nav-3-1-2" />
    

    
    <label class="md-nav__link" for="nav-3-1-2">
      Using Persistent Disks
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-2">
        Using Persistent Disks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../persistent-disks/" title="Manually Attaching Disks"
        class="md-nav__link">
      Manually Attaching Disks
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../persistent-disks/" title="Orphan Disks"
        class="md-nav__link">
      Orphan Disks
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../snapshots/" title="Taking Snapshots"
        class="md-nav__link">
      Taking Snapshots
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../persistent-disk-fs/" title="Using XFS"
        class="md-nav__link">
      Using XFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-3"
          type="checkbox" id="nav-3-1-3" />
    

    
    <label class="md-nav__link" for="nav-3-1-3">
      Using Links
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-3">
        Using Links
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../links/" title="Using Implicit Links"
        class="md-nav__link">
      Using Implicit Links
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../links/" title="Sharing Links"
        class="md-nav__link">
      Sharing Links
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../links-manual/" title="Manually Configuring Links"
        class="md-nav__link">
      Manually Configuring Links
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../errands/" title="Running Errands"
        class="md-nav__link">
      Running Errands
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vm-anti-affinity/" title="VM Anti-Affinity"
        class="md-nav__link">
      VM Anti-Affinity
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-6"
          type="checkbox" id="nav-3-1-6" />
    

    
    <label class="md-nav__link" for="nav-3-1-6">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-6">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../monitoring/" title="Monitoring"
        class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vm-monit/" title="Process Monitoring with Monit"
        class="md-nav__link">
      Process Monitoring with Monit
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cck/" title="IaaS Reconciliation"
        class="md-nav__link">
      IaaS Reconciliation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-7"
          type="checkbox" id="nav-3-1-7" />
    

    
    <label class="md-nav__link" for="nav-3-1-7">
      Migrating
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-7">
        Migrating
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../migrated-from/" title="To Availability Zones"
        class="md-nav__link">
      To Availability Zones
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-v2-diff/" title="From the Ruby CLI"
        class="md-nav__link">
      From the Ruby CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          




  




  <li class="md-nav__item md-nav__item--active md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2"
          type="checkbox" id="nav-3-2" checked />
    

    
    <label class="md-nav__link" for="nav-3-2">
      Packaging Software
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Packaging Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          




  




  <li class="md-nav__item md-nav__item--active md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-1"
          type="checkbox" id="nav-3-2-1" checked />
    

    
    <label class="md-nav__link" for="nav-3-2-1">
      Core Concepts
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-1">
        Core Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          




  




  <li class="md-nav__item md-nav__item--active">
    

    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc"
        type="checkbox" id="toc" />

    
    

    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Creating a Release
      </label>
    
    <a href="./" title="Creating a Release"
        class="md-nav__link md-nav__link--active">
      Creating a Release
    </a>

    
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prep" title="Preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#release-dir" title="Create the release directory" class="md-nav__link">
    Create the release directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source" title="Populate the src directory" class="md-nav__link">
    Populate the src directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategy" title="Choose a work strategy" class="md-nav__link">
    Choose a work strategy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skel" title="Step 1: Create Job Skeletons" class="md-nav__link">
    Step 1: Create Job Skeletons
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#control" title="Create control scripts" class="md-nav__link">
    Create control scripts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monit" title="Update monit files" class="md-nav__link">
    Update monit files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-specs" title="Update job specs" class="md-nav__link">
    Update job specs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-one" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph" title="Step 2: Make Dependency Graphs" class="md-nav__link">
    Step 2: Make Dependency Graphs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-dependency-graph" title=" " class="md-nav__link">
     
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identify-runtime-dependencies" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identify-compile-time-dependencies" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-complete-example-dependency-graph" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pkg-skeletons" title="Step 3: Create Package Skeletons" class="md-nav__link">
    Step 3: Create Package Skeletons
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-pkging-specs" title="Update packaging specs" class="md-nav__link">
    Update packaging specs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pkg-spec-libyaml" title="Example libyaml package spec" class="md-nav__link">
    Example libyaml package spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-spec-ruby" title="Example Ruby package spec" class="md-nav__link">
    Example Ruby package spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-spec-ardo" title="Example ardo_app package spec" class="md-nav__link">
    Example ardo_app package spec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-scripts" title="Create packaging scripts" class="md-nav__link">
    Create packaging scripts
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pkg-script-libyaml" title="Example libyaml packaging script" class="md-nav__link">
    Example libyaml packaging script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-script-ruby" title="Example Ruby packaging script" class="md-nav__link">
    Example Ruby packaging script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-script-ardo" title="Example ardo_app packaging script" class="md-nav__link">
    Example ardo_app packaging script
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-job-specs-with-deps" title="Update job specs with dependencies" class="md-nav__link">
    Update job specs with dependencies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blobs" title="Step 4: Add Blobs" class="md-nav__link">
    Step 4: Add Blobs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-blobstore" title="Configure a blobstore" class="md-nav__link">
    Configure a blobstore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inform" title="Inform BOSH where blobs are" class="md-nav__link">
    Inform BOSH where blobs are
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-upload" title="Do not upload blobs for a dev release" class="md-nav__link">
    Do not upload blobs for a dev release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-props" title="Step 5: Create Job Properties" class="md-nav__link">
    Step 5: Create Job Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dev-release" title="Step 6: Create a Dev Release" class="md-nav__link">
    Step 6: Create a Dev Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dev-release-release" title="Release" class="md-nav__link">
    Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dev-release-deploy" title="Deploy the Dev Release" class="md-nav__link">
    Deploy the Dev Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dev-release-test" title="Test the Dev Release" class="md-nav__link">
    Test the Dev Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-release" title="Create a Final Release" class="md-nav__link">
    Create a Final Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upload-blobs" title="Upload blobs" class="md-nav__link">
    Upload blobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-commit-two" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-release" title="Release" class="md-nav__link">
    Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-commit" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-deploy" title="Deploy the Final Release" class="md-nav__link">
    Deploy the Final Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2"
          type="checkbox" id="nav-3-2-2" />
    

    
    <label class="md-nav__link" for="nav-3-2-2">
      Using Links
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-2">
        Using Links
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../links-properties/" title="Sharing Properties"
        class="md-nav__link">
      Sharing Properties
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-3"
          type="checkbox" id="nav-3-2-3" />
    

    
    <label class="md-nav__link" for="nav-3-2-3">
      Configuring the Blobstore
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-3">
        Configuring the Blobstore
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../release-blobstore/" title="Release Blobstore"
        class="md-nav__link">
      Release Blobstore
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../s3-release-blobstore/" title="Using S3 & IAM Policies"
        class="md-nav__link">
      Using S3 & IAM Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../release-blobs/" title="Working with Blobs"
        class="md-nav__link">
      Working with Blobs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-5"
          type="checkbox" id="nav-3-2-5" />
    

    
    <label class="md-nav__link" for="nav-3-2-5">
      Testing
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-5">
        Testing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../job-templates/" title="Unit Testing Job Templates"
        class="md-nav__link">
      Unit Testing Job Templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../scheduled-procs/" title="Scheduled Processes"
        class="md-nav__link">
      Scheduled Processes
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../compiled-releases/" title="Creating Compiled Releases"
        class="md-nav__link">
      Creating Compiled Releases
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../errands/" title="Using Errands"
        class="md-nav__link">
      Using Errands
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-9"
          type="checkbox" id="nav-3-2-9" />
    

    
    <label class="md-nav__link" for="nav-3-2-9">
      Configuring Processes
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-9">
        Configuring Processes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../props-common/" title="Recommended Property Types"
        class="md-nav__link">
      Recommended Property Types
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-10"
          type="checkbox" id="nav-3-2-10" />
    

    
    <label class="md-nav__link" for="nav-3-2-10">
      Packaging and Compiling
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-10">
        Packaging and Compiling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../packages/" title="Creating Packages"
        class="md-nav__link">
      Creating Packages
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../package-vendoring/" title="Reusing Packages"
        class="md-nav__link">
      Reusing Packages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-11"
          type="checkbox" id="nav-3-2-11" />
    

    
    <label class="md-nav__link" for="nav-3-2-11">
      Windows Compatibility
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-11">
        Windows Compatibility
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../windows/" title="Overview"
        class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../windows-sample-release/" title="Sample Release"
        class="md-nav__link">
      Sample Release
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3"
          type="checkbox" id="nav-3-3" />
    

    
    <label class="md-nav__link" for="nav-3-3">
      Operating Director
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Operating Director
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-1"
          type="checkbox" id="nav-3-3-1" />
    

    
    <label class="md-nav__link" for="nav-3-3-1">
      Monitoring
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-1">
        Monitoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../events/" title="Auditing Events"
        class="md-nav__link">
      Auditing Events
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-tasks/" title="Reviewing Tasks"
        class="md-nav__link">
      Reviewing Tasks
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-access-events/" title="Logging API Access"
        class="md-nav__link">
      Logging API Access
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-2"
          type="checkbox" id="nav-3-3-2" />
    

    
    <label class="md-nav__link" for="nav-3-3-2">
      Securing
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-2">
        Securing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../director-users/" title="Using Basic Users"
        class="md-nav__link">
      Using Basic Users
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-2-2"
          type="checkbox" id="nav-3-3-2-2" />
    

    
    <label class="md-nav__link" for="nav-3-3-2-2">
      Integrating with UAA
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="4">
      <label class="md-nav__title" for="nav-3-3-2-2">
        Integrating with UAA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../director-users-uaa/" title="Configuring Director"
        class="md-nav__link">
      Configuring Director
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-users-uaa-perms/" title="Using Teams"
        class="md-nav__link">
      Using Teams
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../director-certs/" title="Configuring SSL Certificates"
        class="md-nav__link">
      Configuring SSL Certificates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-3"
          type="checkbox" id="nav-3-3-3" />
    

    
    <label class="md-nav__link" for="nav-3-3-3">
      Configuring the Database
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-3">
        Configuring the Database
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../director-configure-db/" title="Builtin PostgreSQL"
        class="md-nav__link">
      Builtin PostgreSQL
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-configure-db/" title="External MySQL"
        class="md-nav__link">
      External MySQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-4"
          type="checkbox" id="nav-3-3-4" />
    

    
    <label class="md-nav__link" for="nav-3-3-4">
      Configuring the Blobstore
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-4">
        Configuring the Blobstore
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../director-configure-blobstore/" title="Builtin DAV Server"
        class="md-nav__link">
      Builtin DAV Server
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-configure-blobstore/" title="Amazon S3"
        class="md-nav__link">
      Amazon S3
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-configure-blobstore/" title="Google Cloud Storage"
        class="md-nav__link">
      Google Cloud Storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../managing-releases/" title="Managing Releases"
        class="md-nav__link">
      Managing Releases
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../managing-stemcells/" title="Managing Stemcells"
        class="md-nav__link">
      Managing Stemcells
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../resurrector/" title="Auto-healing Capabilities"
        class="md-nav__link">
      Auto-healing Capabilities
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../hm-config/" title="Using Health Monitor"
        class="md-nav__link">
      Using Health Monitor
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-9"
          type="checkbox" id="nav-3-3-9" />
    

    
    <label class="md-nav__link" for="nav-3-3-9">
      Using Runtime Config
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-9">
        Using Runtime Config
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../runtime-config/" title="Overview"
        class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../addons-common/" title="Common Addons"
        class="md-nav__link">
      Common Addons
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-10"
          type="checkbox" id="nav-3-3-10" />
    

    
    <label class="md-nav__link" for="nav-3-3-10">
      Integrating with CredHub
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-10">
        Integrating with CredHub
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../variable-types/" title="Variable Types"
        class="md-nav__link">
      Variable Types
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3-11"
          type="checkbox" id="nav-3-3-11" />
    

    
    <label class="md-nav__link" for="nav-3-3-11">
      Optional Features
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-3-11">
        Optional Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../flush-arp/" title="Explicit ARP Flushing"
        class="md-nav__link">
      Explicit ARP Flushing
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../remove-dev-tools/" title="Removing Dev Tools from VMs"
        class="md-nav__link">
      Removing Dev Tools from VMs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../trusted-certs/" title="Installing Certificates on VMs"
        class="md-nav__link">
      Installing Certificates on VMs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../tips/" title="Troubleshooting"
        class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4"
          type="checkbox" id="nav-3-4" />
    

    
    <label class="md-nav__link" for="nav-3-4">
      Using the CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Using the CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-v2/" title="Commands"
        class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-global-flags/" title="Global Flags"
        class="md-nav__link">
      Global Flags
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-envs/" title="Environments"
        class="md-nav__link">
      Environments
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-tunnel/" title="Tunneling"
        class="md-nav__link">
      Tunneling
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4-5"
          type="checkbox" id="nav-3-4-5" />
    

    
    <label class="md-nav__link" for="nav-3-4-5">
      Composing YAML
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-4-5">
        Composing YAML
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-int/" title="Interpolating Variables"
        class="md-nav__link">
      Interpolating Variables
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cli-ops-files/" title="Creating Ops Files"
        class="md-nav__link">
      Creating Ops Files
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5"
          type="checkbox" id="nav-3-5" />
    

    
    <label class="md-nav__link" for="nav-3-5">
      Advanced Networking
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Advanced Networking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5-1"
          type="checkbox" id="nav-3-5-1" />
    

    
    <label class="md-nav__link" for="nav-3-5-1">
      Multi-Cloud Support
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-5-1">
        Multi-Cloud Support
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../cpi-config/" title="Using CPI Config"
        class="md-nav__link">
      Using CPI Config
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../guide-multi-cpi-aws/" title="Using AWS"
        class="md-nav__link">
      Using AWS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../guide-ipv6-on-vsphere/" title="Using IPv6 on vSphere"
        class="md-nav__link">
      Using IPv6 on vSphere
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6"
          type="checkbox" id="nav-3-6" />
    

    
    <label class="md-nav__link" for="nav-3-6">
      Advanced Bootstrapping
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        Advanced Bootstrapping
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../init-external-ip/" title="Using a Public IP"
        class="md-nav__link">
      Using a Public IP
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../jumpbox/" title="Enabling SSH Access"
        class="md-nav__link">
      Enabling SSH Access
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-7"
          type="checkbox" id="nav-3-7" />
    

    
    <label class="md-nav__link" for="nav-3-7">
      In-depth Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-7">
        In-depth Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../dns/" title="Native DNS Support"
        class="md-nav__link">
      Native DNS Support
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../bosh-components/" title="Components of BOSH"
        class="md-nav__link">
      Components of BOSH
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../deploying-step-by-step/" title="Deploying Step by Step"
        class="md-nav__link">
      Deploying Step by Step
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../agent-cpi-interactions/" title="Agent Interactions"
        class="md-nav__link">
      Agent Interactions
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-7-5"
          type="checkbox" id="nav-3-7-5" />
    

    
    <label class="md-nav__link" for="nav-3-7-5">
      Virtual Machines
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-3-7-5">
        Virtual Machines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../vm-struct/" title="Structure of a VM"
        class="md-nav__link">
      Structure of a VM
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vm-config/" title="Configuration Locations"
        class="md-nav__link">
      Configuration Locations
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../job-logs/" title="Using Logs"
        class="md-nav__link">
      Using Logs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../instance-metadata/" title="Instance Metadata"
        class="md-nav__link">
      Instance Metadata
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8"
          type="checkbox" id="nav-3-8" />
    

    
    <label class="md-nav__link" for="nav-3-8">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../build-cpi/" title="Building a CPI"
        class="md-nav__link">
      Building a CPI
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../build-stemcell/" title="Building a Stemcell"
        class="md-nav__link">
      Building a Stemcell
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../repack-stemcell/" title="Repacking Stemcells"
        class="md-nav__link">
      Repacking Stemcells
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../personas/" title="Target Personas"
        class="md-nav__link">
      Target Personas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



    
      
      
      







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4"
          type="checkbox" id="nav-4" />
    

    
    <label class="md-nav__link" for="nav-4">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../terminology/" title="Terminology"
        class="md-nav__link">
      Terminology
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2"
          type="checkbox" id="nav-4-2" />
    

    
    <label class="md-nav__link" for="nav-4-2">
      Deployment Config
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Deployment Config
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../manifest-v2/" title="Schema (UI Test Before)"
        class="md-nav__link">
      Schema (UI Test Before)
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../manifest-v2-schema/" title="Schema (UI Test After)"
        class="md-nav__link">
      Schema (UI Test After)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3"
          type="checkbox" id="nav-4-3" />
    

    
    <label class="md-nav__link" for="nav-4-3">
      Director Cloud Config
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Director Cloud Config
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../cloud-config/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../azs/" title="Availability Zones"
        class="md-nav__link">
      Availability Zones
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../networks/" title="Networks"
        class="md-nav__link">
      Networks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../director-api-v1/" title="Director HTTP API"
        class="md-nav__link">
      Director HTTP API
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5"
          type="checkbox" id="nav-4-5" />
    

    
    <label class="md-nav__link" for="nav-4-5">
      Director Runtime Config
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Director Runtime Config
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../runtime-config-schema/" title="Schema"
        class="md-nav__link">
      Schema
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item">
    <a href="../configs/" title="Generic Configs"
        class="md-nav__link">
      Generic Configs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../cpi-api-v1/" title="Cloud Provider Interface"
        class="md-nav__link">
      Cloud Provider Interface
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8"
          type="checkbox" id="nav-4-8" />
    

    
    <label class="md-nav__link" for="nav-4-8">
      Release Management
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Release Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../release/" title="Overview"
        class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../release-urls/" title="Release URLs"
        class="md-nav__link">
      Release URLs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8-3"
          type="checkbox" id="nav-4-8-3" />
    

    
    <label class="md-nav__link" for="nav-4-8-3">
      Jobs
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-4-8-3">
        Jobs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../jobs/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../job-lifecycle/" title="Update Lifecycle"
        class="md-nav__link">
      Update Lifecycle
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8-3-3"
          type="checkbox" id="nav-4-8-3-3" />
    

    
    <label class="md-nav__link" for="nav-4-8-3-3">
      Lifecycle Hooks
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="4">
      <label class="md-nav__title" for="nav-4-8-3-3">
        Lifecycle Hooks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../drain/" title="Drain"
        class="md-nav__link">
      Drain
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../pre-start/" title="Pre-start"
        class="md-nav__link">
      Pre-start
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../post-start/" title="Post-start"
        class="md-nav__link">
      Post-start
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../post-deploy/" title="Post-deploy"
        class="md-nav__link">
      Post-deploy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8-4"
          type="checkbox" id="nav-4-8-4" />
    

    
    <label class="md-nav__link" for="nav-4-8-4">
      Links
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="3">
      <label class="md-nav__title" for="nav-4-8-4">
        Links
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../links-common-types/" title="Common Types"
        class="md-nav__link">
      Common Types
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-9"
          type="checkbox" id="nav-4-9" />
    

    
    <label class="md-nav__link" for="nav-4-9">
      Legacy Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-9">
        Legacy Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../deployment/" title="What is a Deployment?"
        class="md-nav__link">
      What is a Deployment?
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../stemcell/" title="What is a Stemcell?"
        class="md-nav__link">
      What is a Stemcell?
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../basic-workflow/" title="Basic Workflow"
        class="md-nav__link">
      Basic Workflow
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../deployment-manifest/" title="Deployment Manifest v1"
        class="md-nav__link">
      Deployment Manifest v1
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../bosh-cli/" title="CLI v1 Installation"
        class="md-nav__link">
      CLI v1 Installation
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../sysadmin-commands/" title="CLI v1 Commands"
        class="md-nav__link">
      CLI v1 Commands
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../director-backup/" title="CLI v1 Backup / Restore"
        class="md-nav__link">
      CLI v1 Backup / Restore
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          








  <li class="md-nav__item">
    <label class="md-nav__title"><br>Cloud Providers</label>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-11"
          type="checkbox" id="nav-4-11" />
    

    
    <label class="md-nav__link" for="nav-4-11">
      Amazon Web Services
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-11">
        Amazon Web Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../aws-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../aws-iam-users/" title="IAM Users"
        class="md-nav__link">
      IAM Users
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../aws-iam-instance-profiles/" title="IAM Profiles"
        class="md-nav__link">
      IAM Profiles
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../aws-instance-storage/" title="Using Instance Storage"
        class="md-nav__link">
      Using Instance Storage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../aws-cpi-troubleshooting/" title="Troubleshooting"
        class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-12"
          type="checkbox" id="nav-4-12" />
    

    
    <label class="md-nav__link" for="nav-4-12">
      Google Cloud Platform
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-12">
        Google Cloud Platform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../google-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../google-required-permissions/" title="Required Permissions"
        class="md-nav__link">
      Required Permissions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-13"
          type="checkbox" id="nav-4-13" />
    

    
    <label class="md-nav__link" for="nav-4-13">
      Microsoft Azure
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-13">
        Microsoft Azure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../azure-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../azure-resources/" title="Creating Resources"
        class="md-nav__link">
      Creating Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-14"
          type="checkbox" id="nav-4-14" />
    

    
    <label class="md-nav__link" for="nav-4-14">
      OpenStack
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-14">
        OpenStack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-auto-anti-affinity/" title="Using Auto-anti-affinity"
        class="md-nav__link">
      Using Auto-anti-affinity
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-human-readable-vm-names/" title="Using Human-readable VM names"
        class="md-nav__link">
      Using Human-readable VM names
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-keystonev2/" title="Using Keystone API v2"
        class="md-nav__link">
      Using Keystone API v2
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-light-stemcells/" title="Using Light Stemcells"
        class="md-nav__link">
      Using Light Stemcells
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-nova-networking/" title="Using nova-networking"
        class="md-nav__link">
      Using nova-networking
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-multiple-networks/" title="Multi-homed VMs"
        class="md-nav__link">
      Multi-homed VMs
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-registry/" title="Extended Registry configuration"
        class="md-nav__link">
      Extended Registry configuration
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../openstack-self-signed-endpoints/" title="Self-signed Endpoints"
        class="md-nav__link">
      Self-signed Endpoints
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-15"
          type="checkbox" id="nav-4-15" />
    

    
    <label class="md-nav__link" for="nav-4-15">
      RackHD
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-15">
        RackHD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../rackhd-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-16"
          type="checkbox" id="nav-4-16" />
    

    
    <label class="md-nav__link" for="nav-4-16">
      SoftLayer
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-16">
        SoftLayer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../softlayer-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-17"
          type="checkbox" id="nav-4-17" />
    

    
    <label class="md-nav__link" for="nav-4-17">
      VirtualBox
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-17">
        VirtualBox
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../virtualbox-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-18"
          type="checkbox" id="nav-4-18" />
    

    
    <label class="md-nav__link" for="nav-4-18">
      VMware vCloud
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-18">
        VMware vCloud
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../vcloud-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-19"
          type="checkbox" id="nav-4-19" />
    

    
    <label class="md-nav__link" for="nav-4-19">
      VMware vSphere
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-19">
        VMware vSphere
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-esxi-host-failure/" title="Recovery from an ESXi Host Failure"
        class="md-nav__link">
      Recovery from an ESXi Host Failure
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-ha/" title="vSphere High Availability"
        class="md-nav__link">
      vSphere High Availability
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-migrate-datastores/" title="Migrating Datastores"
        class="md-nav__link">
      Migrating Datastores
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-network-partition/" title="Recovery from a vSphere Network Partitioning Fault"
        class="md-nav__link">
      Recovery from a vSphere Network Partitioning Fault
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../vsphere-vmotion-support/" title="Storage DRS and vMotion Support"
        class="md-nav__link">
      Storage DRS and vMotion Support
    </a>
  </li>

        
          
          
          







  <li class="md-nav__item">
    <a href="../init-vsphere-rp/" title="Bootstrapping with Resource Pools"
        class="md-nav__link">
      Bootstrapping with Resource Pools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
          
          
          







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-20"
          type="checkbox" id="nav-4-20" />
    

    
    <label class="md-nav__link" for="nav-4-20">
      Warden
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="2">
      <label class="md-nav__title" for="nav-4-20">
        Warden
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../warden-cpi/" title="Usage"
        class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



        
      </ul>
    </nav>
  </li>



    
      
      
      







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5"
          type="checkbox" id="nav-5" />
    

    
    <label class="md-nav__link" for="nav-5">
      Stemcells
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Stemcells
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../stemcells/" title="Stemcells"
        class="md-nav__link">
      Stemcells
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



    
      
      
      







  <li class="md-nav__item md-nav__item--nested">

    
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6"
          type="checkbox" id="nav-6" />
    

    
    <label class="md-nav__link" for="nav-6">
      Releases
    </label>
    <nav class="md-nav" data-md-component="collapsible"
        data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>

        
        
        
          
          
          







  <li class="md-nav__item">
    <a href="../releases/" title="Releases"
        class="md-nav__link">
      Releases
    </a>
  </li>

        
      </ul>
    </nav>
  </li>



    
      
      
      








  <li class="md-nav__item">
    <label class="md-nav__title"><br></label>
  </li>



    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prep" title="Preparation" class="md-nav__link">
    Preparation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#release-dir" title="Create the release directory" class="md-nav__link">
    Create the release directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source" title="Populate the src directory" class="md-nav__link">
    Populate the src directory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#strategy" title="Choose a work strategy" class="md-nav__link">
    Choose a work strategy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skel" title="Step 1: Create Job Skeletons" class="md-nav__link">
    Step 1: Create Job Skeletons
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#control" title="Create control scripts" class="md-nav__link">
    Create control scripts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monit" title="Update monit files" class="md-nav__link">
    Update monit files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-specs" title="Update job specs" class="md-nav__link">
    Update job specs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-one" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph" title="Step 2: Make Dependency Graphs" class="md-nav__link">
    Step 2: Make Dependency Graphs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-dependency-graph" title=" " class="md-nav__link">
     
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identify-runtime-dependencies" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identify-compile-time-dependencies" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-complete-example-dependency-graph" title=" " class="md-nav__link">
     
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pkg-skeletons" title="Step 3: Create Package Skeletons" class="md-nav__link">
    Step 3: Create Package Skeletons
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-pkging-specs" title="Update packaging specs" class="md-nav__link">
    Update packaging specs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pkg-spec-libyaml" title="Example libyaml package spec" class="md-nav__link">
    Example libyaml package spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-spec-ruby" title="Example Ruby package spec" class="md-nav__link">
    Example Ruby package spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-spec-ardo" title="Example ardo_app package spec" class="md-nav__link">
    Example ardo_app package spec
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-scripts" title="Create packaging scripts" class="md-nav__link">
    Create packaging scripts
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pkg-script-libyaml" title="Example libyaml packaging script" class="md-nav__link">
    Example libyaml packaging script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-script-ruby" title="Example Ruby packaging script" class="md-nav__link">
    Example Ruby packaging script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pkg-script-ardo" title="Example ardo_app packaging script" class="md-nav__link">
    Example ardo_app packaging script
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-job-specs-with-deps" title="Update job specs with dependencies" class="md-nav__link">
    Update job specs with dependencies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blobs" title="Step 4: Add Blobs" class="md-nav__link">
    Step 4: Add Blobs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config-blobstore" title="Configure a blobstore" class="md-nav__link">
    Configure a blobstore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inform" title="Inform BOSH where blobs are" class="md-nav__link">
    Inform BOSH where blobs are
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-upload" title="Do not upload blobs for a dev release" class="md-nav__link">
    Do not upload blobs for a dev release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-props" title="Step 5: Create Job Properties" class="md-nav__link">
    Step 5: Create Job Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dev-release" title="Step 6: Create a Dev Release" class="md-nav__link">
    Step 6: Create a Dev Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dev-release-release" title="Release" class="md-nav__link">
    Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dev-release-deploy" title="Deploy the Dev Release" class="md-nav__link">
    Deploy the Dev Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dev-release-test" title="Test the Dev Release" class="md-nav__link">
    Test the Dev Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-release" title="Create a Final Release" class="md-nav__link">
    Create a Final Release
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upload-blobs" title="Upload blobs" class="md-nav__link">
    Upload blobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-commit-two" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-release" title="Release" class="md-nav__link">
    Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-commit" title="Commit" class="md-nav__link">
    Commit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#final-release-deploy" title="Deploy the Final Release" class="md-nav__link">
    Deploy the Final Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
  
                
                  <a href="https://github.com/cloudfoundry/docs-bosh/edit/master/create-release.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Creating a Release</h1>
                
                <p>A release contains one or more pieces of software that work together.
For example, you could create a release of a service with three pieces:
two MySQL nodes and a dashboard app.</p>
<p>There are four fundamental elements in a release:</p>
<ul>
<li><strong>Jobs</strong> describe pieces of the service or application you are releasing</li>
<li><strong>Packages</strong> provide source code and dependencies to jobs</li>
<li><strong>Source</strong> provides non-binary files to packages</li>
<li><strong>Blobs</strong> provide binary files (other than those checked into a source code repository) to packages</li>
</ul>
<p>The following instructions use an example release that includes two jobs:
a web UI and a background worker.
The two jobs split up the functionality provided by single Ruby app,
<code class="codehilite">ardo_app</code> (you can use simple <a href="https://gist.github.com/antonsoroko/974924e0692aa2171229dafa5f2561b2">gist</a> as app).</p>
<hr />
<h2 id="prep">Preparation<a class="headerlink" href="#prep" title="Permanent link">&para;</a></h2>
<p>This section needs to be completed once.
Next, you iterate through Steps 1 through 6 until your dev release is
satisfactory.
Then you can do a final release.</p>
<h3 id="release-dir">Create the release directory<a class="headerlink" href="#release-dir" title="Permanent link">&para;</a></h3>
<p>To create the release directory, navigate into the workspace where you want the
release to be, and run:</p>
<p><code class="codehilite">bosh init-release --dir &lt;release_name&gt;</code></p>
<p>You can add the <code class="codehilite">--git</code> option to initialize a git repository.
Use dashes in the release name.
Use underscores for all other filenames in the release.</p>
<p>View the release with <code class="codehilite">tree</code>:</p>
<div class="codehilite"><pre><span></span>$ tree .
.
 blobs
 config
  blobs.yml
 <span class="nb">jobs</span>
 packages
 src

<span class="m">5</span> directories, <span class="m">1</span> file
</pre></div>

<p>When deploying your release, BOSH places compiled code and other resources
in the <code class="codehilite">/var/vcap/</code> directory tree, which BOSH creates on the job VMs.
The four directories you just created, <code class="codehilite">jobs</code>, <code class="codehilite">packages</code>, <code class="codehilite">src</code>, and <code class="codehilite">blobs</code>,
appear on job VMs as <code class="codehilite">/var/vcap/jobs</code>, <code class="codehilite">/var/vcap/packages</code>, <code class="codehilite">/var/vcap/src</code>,
and <code class="codehilite">/var/vcap/blobs</code>, respectively.</p>
<h3 id="source">Populate the src directory<a class="headerlink" href="#source" title="Permanent link">&para;</a></h3>
<p>Copy your source code into the <code class="codehilite">src</code> directory.
Alternatively, link your source code to the directory using a mechanism such as
a Git submodule or a Mercurial repo.</p>
<h3 id="strategy">Choose a work strategy<a class="headerlink" href="#strategy" title="Permanent link">&para;</a></h3>
<p>Choose whether you want to work one step at a time or one job at a time.
For releases with just a few jobs, going one step at a time is probably easiest.
If you have a larger number of jobs, going one job at a time may be more efficient.</p>
<hr />
<h2 id="job-skel">Step 1: Create Job Skeletons<a class="headerlink" href="#job-skel" title="Permanent link">&para;</a></h2>
<p>Navigate into the release directory.</p>
<p>For each job, create a job skeleton:</p>
<p><code class="codehilite">bosh generate-job &lt;job_name&gt;</code></p>
<p>In our example, we run <code class="codehilite">bosh generate-job</code> twice, once for the <code class="codehilite">web_ui</code> job,
and once for the <code class="codehilite">bg_worker</code> job.</p>
<p>View the job skeletons with <code class="codehilite">tree</code>:</p>
<div class="codehilite"><pre><span></span>$ tree .
.
 blobs
 config
  blobs.yml
 <span class="nb">jobs</span>
  bg_worker
   monit
   spec
   templates
  web_ui
      monit
      spec
      templates
 packages
 src

<span class="m">9</span> directories, <span class="m">5</span> files
</pre></div>

<h3 id="control">Create control scripts<a class="headerlink" href="#control" title="Permanent link">&para;</a></h3>
<p>Every job needs a way to start and stop.
You provide that by writing a control script and updating the <code class="codehilite">monit</code> file.</p>
<p>The control script:</p>
<ul>
<li>Includes a start command and a stop command.</li>
<li>Is an ERB template stored in the <code class="codehilite">templates</code> directory for the relevant job.</li>
</ul>
<p>For each job, create a control script that configures the job to store logs in <code class="codehilite">/var/vcap/sys/log/JOB_NAME</code>. Save this script as <code class="codehilite">ctl.erb</code> in the <code class="codehilite">templates</code> directory for its job.</p>
<p>The control script for the <code class="codehilite">web_ui</code> job looks like this:</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">RUN_DIR</span><span class="o">=</span>/var/vcap/sys/run/web_ui
<span class="nv">LOG_DIR</span><span class="o">=</span>/var/vcap/sys/log/web_ui
<span class="nv">PIDFILE</span><span class="o">=</span><span class="si">${</span><span class="nv">RUN_DIR</span><span class="si">}</span>/pid

<span class="k">case</span> <span class="nv">$1</span> in

  start<span class="o">)</span>
    mkdir -p <span class="nv">$RUN_DIR</span> <span class="nv">$LOG_DIR</span>
    chown -R vcap:vcap <span class="nv">$RUN_DIR</span> <span class="nv">$LOG_DIR</span>

    <span class="nb">echo</span> <span class="nv">$$</span> &gt; <span class="nv">$PIDFILE</span>

    <span class="nb">cd</span> /var/vcap/packages/ardo_app

    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/var/vcap/packages/ruby_1.9.3/bin:<span class="nv">$PATH</span>

    <span class="nb">exec</span> /var/vcap/packages/ruby_1.9.3/bin/bundle <span class="nb">exec</span> <span class="se">\</span>
      rackup -p &lt;%<span class="o">=</span> properties.web_ui.port %&gt; <span class="se">\</span>
      &gt;&gt;  <span class="nv">$LOG_DIR</span>/web_ui.stdout.log <span class="se">\</span>
      <span class="m">2</span>&gt;&gt; <span class="nv">$LOG_DIR</span>/web_ui.stderr.log

    <span class="p">;;</span>

  stop<span class="o">)</span>
    <span class="nb">kill</span> -9 <span class="sb">`</span>cat <span class="nv">$PIDFILE</span><span class="sb">`</span>
    rm -f <span class="nv">$PIDFILE</span>

    <span class="p">;;</span>

  *<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">&quot;Usage: ctl {start|stop}&quot;</span> <span class="p">;;</span>

<span class="k">esac</span>
</pre></div>

<p>If your release needs templates other than the control script, create them now.</p>
<h3 id="monit">Update monit files<a class="headerlink" href="#monit" title="Permanent link">&para;</a></h3>
<p>The <code class="codehilite">monit</code> file:</p>
<ul>
<li>Specifies the process ID (pid) file for the job</li>
<li>References each command provided by the templates for the job</li>
<li>Specifies that the job belongs to the <code class="codehilite">vcap</code> group</li>
</ul>
<p>On a deployed release, a BOSH Agent runs on each job VM.
BOSH communicates with the Agent, which in turn executes commands in the
control script.
The Agent does this using open source process monitoring software called
<a href="http://mmonit.com/monit/">Monit</a>.</p>
<p>The <code class="codehilite">monit</code> file for the <code class="codehilite">web_ui</code> job looks like this:</p>
<div class="codehilite"><pre><span></span>check process web_ui
  with pidfile /var/vcap/sys/run/web_ui/pid
  start program &quot;/var/vcap/jobs/web_ui/bin/ctl start&quot;
  stop program &quot;/var/vcap/jobs/web_ui/bin/ctl stop&quot;
  group vcap
</pre></div>

<p>Update the <code class="codehilite">monit</code> file for each of your jobs.
Use <code class="codehilite">/var/vcap</code> paths as shown in the example.</p>
<p class="note"><strong>Note</strong>: BOSH requires a <code>monit</code> file for each job in a release. When developing a release, you can use an empty <code>monit</code> file to meet this requirement without having to first create a control script.</p>

<h3 id="job-specs">Update job specs<a class="headerlink" href="#job-specs" title="Permanent link">&para;</a></h3>
<p>At compile time, BOSH transforms templates into files, which it then replicates
on the job VMs.</p>
<p>The template names and file paths are among the metadata for each job that
resides in the job <code class="codehilite">spec</code> file.</p>
<p>In the job <code class="codehilite">spec</code> file, the <code class="codehilite">templates</code> block contains key/value pairs where:</p>
<ul>
<li>Each key is template name</li>
<li>Each value is the path to the corresponding file on a job VM</li>
</ul>
<p>The file paths that you provide for templates are relative to
the <code class="codehilite">/var/vcap/jobs/&lt;job_name&gt;</code> directory on the VM.
For example, <code class="codehilite">bin/ctl</code> becomes <code class="codehilite">/var/vcap/jobs/&lt;job_name&gt;/bin/ctl</code> on the job VM.
Using <code class="codehilite">bin</code> as the directory where these files go is a convention.</p>
<p>The <code class="codehilite">templates</code> block of the updated <code class="codehilite">spec</code> files for the example jobs look
like this:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">templates</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">ctl.erb</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bin/ctl</span>
</pre></div>

<p>For each job, update the <code class="codehilite">spec</code> file with template names.</p>
<h3 id="commit-one">Commit<a class="headerlink" href="#commit-one" title="Permanent link">&para;</a></h3>
<p>You have now created one or more job skeletons; this is a good time to commit.</p>
<p>If you used the <code class="codehilite">--git</code> option with <code class="codehilite">bosh init-release</code> (as recommended), the
correct <code class="codehilite"><span class="na">.gitignore</span></code> file has been automatically created for you.</p>
<hr />
<h2 id="graph">Step 2: Make Dependency Graphs<a class="headerlink" href="#graph" title="Permanent link">&para;</a></h2>
<p>There are two kinds of dependencies in a BOSH release:</p>
<ul>
<li>The <strong>runtime dependency</strong>, where a job depends on a package at runtime.
For example, the <code class="codehilite">web_ui</code> job depends on Ruby.</li>
<li>The <strong>compile-time dependency</strong>, where a package depends on another package at
compile time.
For example, Ruby depends on the YAML library.</li>
</ul>
<p>Three rules govern these dependencies:</p>
<ul>
<li>Jobs never depend on other jobs.</li>
<li>Jobs can depend on packages.</li>
<li>Packages can depend on other packages.</li>
</ul>
<h3 id="building-the-dependency-graph"><a id="build-graph"> </a>Building the Dependency Graph<a class="headerlink" href="#building-the-dependency-graph" title="Permanent link">&para;</a></h3>
<p>Create a dependency graph to clarify your understanding of the
dependencies between the jobs and packages in your release.</p>
<h4 id="identify-runtime-dependencies"><a id="runtime"> </a>Identify runtime dependencies<a class="headerlink" href="#identify-runtime-dependencies" title="Permanent link">&para;</a></h4>
<p>Whenever a control script or other template cites a package name, the job
that the template belongs to depends on the cited package at runtime.</p>
<p>For each job, find all the cases where your control scripts cite packages.
Add these runtime dependencies to your dependency graph.</p>
<p>In our example, this line in both of our <code class="codehilite">ctl.erb</code> scripts cites <code class="codehilite">ardo_app</code>:</p>
<div class="codehilite"><pre><span></span>cd /var/vcap/packages/ardo_app
</pre></div>

<p>This line cites Ruby:</p>
<div class="codehilite"><pre><span></span>exec /var/vcap/packages/ruby_1.9.3/bin/bundle exec
</pre></div>

<p>This means that both the <code class="codehilite">web-ui</code> and <code class="codehilite">bg_worker</code> jobs have runtime
dependencies on both the <code class="codehilite">ardo_app</code> and <code class="codehilite">ruby_1.9.3</code> packages.</p>
<p>We add these four runtime dependencies to our example dependency graph.</p>
<h4 id="identify-compile-time-dependencies"><a id="compile-time"> </a>Identify compile-time dependencies<a class="headerlink" href="#identify-compile-time-dependencies" title="Permanent link">&para;</a></h4>
<p>Use your knowledge about the runtime dependencies you have already noted.
Consider the packages you have identified as dependencies.
Do any of them depend on other packages in turn?</p>
<p>Whenever a package depends on another package, that is a compile-time
dependency.</p>
<p>For each job, add the compile-time dependencies to your dependency graph.
If you miss a dependency, BOSH lets you know later, when you try to deploy.</p>
<p>In our example, we already noted a runtime dependency on Ruby 1.9.3.
We now ask ourselves whether Ruby 1.9.3 itself has any dependencies.
The answer is yes, it depends on libyaml 0.1.4.</p>
<p>We add this compile-time dependency to our example dependency graph.</p>
<h4 id="the-complete-example-dependency-graph"><a id="dep-graph-example"> </a>The complete example dependency graph<a class="headerlink" href="#the-complete-example-dependency-graph" title="Permanent link">&para;</a></h4>
<p>The complete dependency graph for <code class="codehilite">ardo-release</code> looks like this:</p>
<p><img alt="image" src="../images/dep-graph.png" /></p>
<p>For a large or complicated release, consider making more than one dependency
graph.</p>
<h2 id="pkg-skeletons">Step 3: Create Package Skeletons<a class="headerlink" href="#pkg-skeletons" title="Permanent link">&para;</a></h2>
<p>Packages give BOSH the information needed to prepare the binaries and
dependencies for your jobs.</p>
<p>Create package skeletons starting from the bottom of your dependency graph.</p>
<p><code class="codehilite">bosh generate-package &lt;dependency_name&gt;</code></p>
<p>In our example, we run this command three times.
Starting from the bottom of the dependency graph,
we run it for <code class="codehilite">libyaml_0.1.4</code>, <code class="codehilite">ruby_1.9.3</code>, and <code class="codehilite">ardo_app</code>.</p>
<p>View the package skeletons with <code class="codehilite">tree</code>:</p>
<div class="codehilite"><pre><span></span>$ tree packages
packages
 ardo_app
  packaging
  pre_packaging
  spec
 libyaml_0.1.4
  packaging
  pre_packaging
  spec
 ruby_1.9.3
     packaging
     pre_packaging
     spec

<span class="m">3</span> directories, <span class="m">9</span> files
</pre></div>

<p>Putting each dependency in a separate package provides maximum reusability
along with a clear, modular structure. This is not mandatory; what packages
to create is a matter of preference. You could even opt to put all the
dependencies together in a single package, though that is not recommended.</p>
<p class="note"><strong>Note</strong>: Use of the <code>pre_packaging</code> file is not recommended, and is not discussed in this tutorial.</p>

<p>Without using <code class="codehilite">pre_packaging</code> for our <code class="codehilite">ardo_app</code> we need to pack gems manually for further usage:</p>
<div class="codehilite"><pre><span></span>$ <span class="nb">cd</span> src/ardo_app/
$ bundle package
</pre></div>

<h3 id="update-pkging-specs">Update packaging specs<a class="headerlink" href="#update-pkging-specs" title="Permanent link">&para;</a></h3>
<p>Within each package directory, there is a <code class="codehilite">spec</code> file which states:</p>
<ul>
<li>The package name</li>
<li>The package's dependencies</li>
<li>The location where BOSH can find the binaries and other files that the package needs at compile time</li>
</ul>
<p>Use your dependency graph to determine which dependencies belong in each spec.
Developer preferences and style play a role here.
Consider our example: the spec for Ruby lists <code class="codehilite">rubygems</code> and <code class="codehilite">bundler</code> as dependencies along
with Ruby itself.
Some Ruby developers would do it this way; others would not.</p>
<p>To maximize portability of your release across different versions of stemcells,
never depend on the presence of libraries or other software on stemcells.</p>
<p>To describe binary locations in the <code class="codehilite">files</code> block of the spec:</p>
<ul>
<li>
<p>Find the official site for the binary in question.
For example, Ruby might be at <code class="codehilite">http://cache.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p484.tar.gz</code>.</p>
</li>
<li>
<p>Download the binary from the official location and make sure the file hash matches.</p>
</li>
<li>
<p>Record the binary name including version number, with a slash and the binary
filename concatenated to it.
It's a good idea to cite the official URL in a comment, in the same line.</p>
</li>
</ul>
<p>BOSH interprets the locations you record in the <code class="codehilite">files</code> section as being
either in the <code class="codehilite">src</code> directory or in the <code class="codehilite">blobs</code> directory.
(BOSH looks in <code class="codehilite">src</code> first.)
When you add the actual blobs to a blobstore (see the next section),
BOSH populates the <code class="codehilite">blobs</code> directory with the correct information.</p>
<p>For packages that depend on their own source code, use the globbing pattern
<code class="codehilite">&lt;package_name&gt;/**/*</code> to deep-traverse the directory in <code class="codehilite">src</code> where
the source code should reside.</p>
<p>Update the spec for each package.
Refer to the example specs below for guidance.</p>
<h4 id="pkg-spec-libyaml">Example libyaml package spec<a class="headerlink" href="#pkg-spec-libyaml" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">libyaml_0.1.4</span>

<span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[]</span>

<span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libyaml_0.1.4/yaml-0.1.4.tar.gz</span> <span class="c1"># From http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz</span>
</pre></div>

<h4 id="pkg-spec-ruby">Example Ruby package spec<a class="headerlink" href="#pkg-spec-ruby" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3</span>

<span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libyaml_0.1.4</span>

<span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3/ruby-1.9.3-p484.tar.gz</span> <span class="c1"># http://cache.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p484.tar.gz</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3/rubygems-1.8.24.tgz</span>    <span class="c1"># http://production.cf.rubygems.org/rubygems/rubygems-1.8.24.tgz</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3/bundler-1.2.1.gem</span>      <span class="c1"># https://rubygems.org/downloads/bundler-1.2.1.gem</span>
</pre></div>

<h4 id="pkg-spec-ardo">Example ardo_app package spec<a class="headerlink" href="#pkg-spec-ardo" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ardo_app</span>

<span class="l l-Scalar l-Scalar-Plain">dependencies</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3</span>

<span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ardo_app/**/*</span>
</pre></div>

<h3 id="pkg-scripts">Create packaging scripts<a class="headerlink" href="#pkg-scripts" title="Permanent link">&para;</a></h3>
<p>At compile time, BOSH takes the source files referenced in the package specs,
 and renders them into the executable binaries and scripts that your deployed
jobs need.</p>
<p>You write packaging scripts to instruct BOSH how to do this.
The instructions may involve some combination of copying, compilation, and
related procedures.
For example:</p>
<ul>
<li>
<p>For a Ruby app like <code class="codehilite">ardo_app</code>, BOSH must copy source files and install Ruby
gems.</p>
</li>
<li>
<p>For Ruby itself, BOSH must compile source code into a binary.</p>
</li>
<li>
<p>For a Python app, BOSH must copy source files and install Python eggs.</p>
</li>
</ul>
<p>BOSH relies on you to write packaging scripts that perform the correct operation.</p>
<p>Adhere to these principles when writing packaging scripts:</p>
<ul>
<li>
<p>Use your dependency graph to determine which dependencies belong in each
packaging script.</p>
</li>
<li>
<p>Begin each script with a <code class="codehilite">set -e -x</code> line.
This aids debugging at compile time by causing the script to exit immediately
if a command exits with a non-zero exit code.</p>
</li>
<li>
<p>Ensure that any copying, installing or compiling delivers resulting code to
 the install target directory (represented as the <code class="codehilite">BOSH_INSTALL_TARGET</code>
environment variable). For <code class="codehilite">make</code> commands, use <code class="codehilite">configure</code> or its equivalent
to accomplish this.</p>
</li>
<li>
<p>Be aware that BOSH ensures that dependencies cited in the <code class="codehilite">dependencies</code>
block of package <code class="codehilite">spec</code> files are available to the deployed binary.
For example, in the <code class="codehilite">spec</code> file for the Ruby package, we cite libyaml as a
dependency.
This ensures that on the compilation VMs, the packaging script for Ruby has
access to the compiled libyaml package.</p>
</li>
</ul>
<p>If the instructions you provide in the packaging scripts fail to deliver compiled
code to <code class="codehilite">BOSH_INSTALL_TARGET</code>, the job cannot function because the VM has no
way to find the code to run.
This failure scenario can happen if, for example,
you use a <code class="codehilite">make</code> command that delivers compiled code to some standard location
by default.
You can fix the problem by configuring <code class="codehilite">make</code> to compile into
<code class="codehilite">BOSH_INSTALL_TARGET</code>.
See how this is done in the example packaging scripts.</p>
<p>Like control scripts, writing packaging scripts is one of the heavier tasks
entailed in creating a release.
Write your packaging scripts now.
Refer to the examples below for guidance.</p>
<h4 id="pkg-script-libyaml">Example libyaml packaging script<a class="headerlink" href="#pkg-script-libyaml" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>set -e -x

tar xzf libyaml_0.1.4/yaml-0.1.4.tar.gz
pushd yaml-0.1.4
  ./configure --prefix=<span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span>

  make
  make install
popd
</pre></div>

<h4 id="pkg-script-ruby">Example Ruby packaging script<a class="headerlink" href="#pkg-script-ruby" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>set -e -x

tar xzf ruby_1.9.3/ruby-1.9.3-p484.tar.gz
pushd ruby-1.9.3-p484
  ./configure \
    --prefix=<span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span> \
    --disable-install-doc \
    --with-opt-dir=/var/vcap/packages/libyaml_0.1.4

  make
  make install
popd

tar zxvf ruby_1.9.3/rubygems-1.8.24.tgz
pushd rubygems-1.8.24
  <span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span>/bin/ruby setup.rb
popd

<span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span>/bin/gem install ruby_1.9.3/bundler-1.2.1.gem --no-ri --no-rdoc
</pre></div>

<h4 id="pkg-script-ardo">Example ardo_app packaging script<a class="headerlink" href="#pkg-script-ardo" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>set -e -x

cp -a ardo_app/* <span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span>

cd <span class="cp">${</span><span class="n">BOSH_INSTALL_TARGET</span><span class="cp">}</span>

/var/vcap/packages/ruby_1.9.3/bin/bundle install \
  --local \
  --deployment \
  --without development test
</pre></div>

<h3 id="update-job-specs-with-deps">Update job specs with dependencies<a class="headerlink" href="#update-job-specs-with-deps" title="Permanent link">&para;</a></h3>
<p>The dependency graph reveals runtime dependencies that
need to be added to the <code class="codehilite">packages</code> block of the job spec.</p>
<p>Edit the job specs to include these dependencies.</p>
<p>In our example, the dependency graph shows that <code class="codehilite">web_ui</code> job depends on
<code class="codehilite">ardo_app</code> and <code class="codehilite">ruby_1.9.3</code>:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">packages</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ardo_app</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ruby_1.9.3</span>
</pre></div>

<hr />
<h2 id="blobs">Step 4: Add Blobs<a class="headerlink" href="#blobs" title="Permanent link">&para;</a></h2>
<p>When creating a release, you will likely use a source code repository.
But releases often use tar files or other binaries, also known as blobs.
Checking blobs into a repository is problematic if your repository
unsuited to dealing with large binaries (as is true of Git, for example).</p>
<p>BOSH lets you avoid checking blobs into a repository by doing the following:</p>
<ul>
<li>
<p>For dev releases, use local copies of blobs.</p>
</li>
<li>
<p>For a final release, upload blobs to a blobstore, and direct BOSH to obtain the blobs from there.</p>
</li>
</ul>
<h3 id="config-blobstore">Configure a blobstore<a class="headerlink" href="#config-blobstore" title="Permanent link">&para;</a></h3>
<p>In the <code class="codehilite">config</code> directory, you record the information BOSH needs about the
blobstore:</p>
<ul>
<li>
<p>The <code class="codehilite">final.yml</code> file names the blobstore and declares its type, which is either <code class="codehilite">local</code>
or one of several other types that specify blobstore providers.</p>
</li>
<li>
<p>The <code class="codehilite">private.yml</code> file specifies the blobstore path, along with a secret.</p>
</li>
</ul>
<p><code class="codehilite">private.yml</code> contains keys for accessing the blobstore and should not be
checked into a repository.
(If you used the <code class="codehilite">--git</code> option when running <code class="codehilite">bosh init-release</code> at the beginning
of this tutorial, <code class="codehilite">private.yml</code> is automatically <code class="codehilite">gitignored</code>.)</p>
<p>The <code class="codehilite">config</code> directory also contains two files whose content is automatically
generated: the <code class="codehilite">blobs.yml</code> file and the <code class="codehilite">dev.yml</code> file.</p>
<p>Adapt the examples below to fit the specifics of your release.
Our example release uses the <code class="codehilite">local</code> type blobstore because otherwise it would
be necessary to explain how to configure a public blobstore such as
Amazon S3, which is too large a topic for this context.</p>
<p>The <code class="codehilite">local</code> type blobstore is suitable for learning but the resulting release
cannot be shared.
For that reason, you should configure a non-local, publicly available blobstore
for releases that you intend to share.
Normally, the blobstore you choose when you begin working on a release is used
for all subsequent versions of the release.
Changing the blobstore that a release uses is beyond the scope of this tutorial.</p>
<p>Example <code class="codehilite">final.yml</code>:</p>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">blobstore</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">provider</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">local</span>
  <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">blobstore_path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/ardo-blobs</span>
<span class="l l-Scalar l-Scalar-Plain">final_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ardo_app</span>
</pre></div>

<p>Example <code class="codehilite">private.yml</code>:</p>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">blobstore_secret</span><span class="p p-Indicator">:</span> <span class="s">&#39;does-not-matter&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">blobstore</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">local</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">blobstore_path</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/tmp/ardo-blobs</span>
</pre></div>

<p>If you have a <code class="codehilite">private.yml</code> file:</p>
<ul>
<li><strong>Required</strong>: Include the <code class="codehilite">blobstore_path</code> in the <code class="codehilite">private.yml</code> file.</li>
<li><strong>Optional</strong>: Include the <code class="codehilite">blobstore_path</code> in the <code class="codehilite">final.yml</code> file. Doing so allows you to <code class="codehilite">gitignore</code> the <code class="codehilite">private.yml</code> file but still allow the release to be downloaded and used on other systems.</li>
</ul>
<p class="note"><strong>Note</strong>: The <code>blobstore_secret</code> is required for the <code>local</code> type blobstore.
This is true even though the <code>blobstore_secret</code> line is deprecated and its
content does not matter.
There is never a <code>blobstore_secret</code> line for blobstores of types other than
<code>local</code>.</p>

<h3 id="inform">Inform BOSH where blobs are<a class="headerlink" href="#inform" title="Permanent link">&para;</a></h3>
<p>In the package <code class="codehilite">spec</code> file, the <code class="codehilite">files</code> block lists any binaries you downloaded,
along with the URLs from which you downloaded them.
(This assumes that you followed the directions in the <a href="#update-pkging-specs">Update package specs</a> section.)</p>
<p>Those files are blobs, and now you need the paths to the downloaded blobs on
your local system.</p>
<p>In our example, the <code class="codehilite">spec</code> file for the <code class="codehilite">libyaml_0.1.4</code> package includes the line:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">files</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libyaml_0.1.4/yaml-0.1.4.tar.gz</span> <span class="c1"># From http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz</span>
</pre></div>

<p>If you downloaded the blob, its local path might be:</p>
<p><code class="codehilite">~/Downloads/yaml-0.1.4.tar.gz</code></p>
<p>Go through all your packages and make a list of local paths to the blobs you downloaded.
Now you are ready to inform BOSH about these blobs.</p>
<p>For each blob, run:</p>
<p><code class="codehilite">bosh add-blob &lt;path_to_blob_on_local_system&gt; &lt;package_name&gt;</code></p>
<p>e.g.</p>
<p><code class="codehilite">bosh add-blob ~/Downloads/yaml-0.1.4.tar.gz libyaml_0.1.4</code></p>
<p>The <code class="codehilite">bosh add-blob</code> command adds a local blob to the collection your release
recognizes as BOSH blobs.</p>
<p>The usage shown above is a blend of requirement and convention.
It works like this:</p>
<ul>
<li>For the first argument, you provide the path to the blob on your local system</li>
<li>For the second argument, you provide a destination within the <code class="codehilite">blobs</code> directory
in your release</li>
<li>BOSH goes into the <code class="codehilite">blobs</code> directory and creates a subdirectory with
the name of the package that the local blob represents</li>
<li>In the new subdirectory, BOSH creates a symbolic link to a copy of the blob
which BOSH makes in a hidden directory</li>
</ul>
<p>Using the package name as the second argument of the <code class="codehilite">bosh add-blob</code> command
is recommended because it produces a cleanly-organized blobs directory.</p>
<p>Later, when you upload blobs for a final release, BOSH uses the hidden directory
as a staging area.</p>
<h3 id="no-upload">Do not upload blobs for a dev release<a class="headerlink" href="#no-upload" title="Permanent link">&para;</a></h3>
<p>Once you have uploaded blobs to a non-local blobstore, those blobs may become
essential to some other developer.
For this reason, uploading a blob and then removing it is considered poor practice.</p>
<p>When creating dev releases, do not run <code class="codehilite">bosh upload-blobs</code>.
(You only run it when you do a final release.)</p>
<hr />
<h2 id="create-props">Step 5: Create Job Properties<a class="headerlink" href="#create-props" title="Permanent link">&para;</a></h2>
<p>If your service needs to be configurable at deployment time,
you create the desired inputs or controls and specify them in the release.
Each input is a <em>property</em> that belongs to a particular job.</p>
<p>Creating properties requires three steps:</p>
<ol>
<li>
<p>Define properties and defaults in the <code class="codehilite">properties</code> block of
the job spec.</p>
</li>
<li>
<p>Use the property lookup helper <code class="codehilite">p()</code> to reference properties in
relevant templates.</p>
</li>
</ol>
<p>For example, a start command can take a property as an argument,
using the property lookup helper:</p>
<div class="codehilite"><pre><span></span><span class="x">   </span><span class="cp">&lt;%=</span> <span class="nb">p</span><span class="p">(</span><span class="s1">&#39;&lt;job_name&gt;.&lt;property_name&gt;&#39;</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div>


<ol>
<li>Specify the property in the <a href="../manifest-v2.html#instance-groups">deployment manifest</a>.</li>
</ol>
<p>Adapt the example below to create any properties your release needs now.</p>
<p>In our example, we want the port that the web UI listens on to be a
configurable property.</p>
<p>We edit the spec for the web UI job to look like this:</p>
<div class="codehilite"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span>
     <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Port that web_ui app listens on</span>
     <span class="l l-Scalar l-Scalar-Plain">default</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
</pre></div>

<hr />
<h2 id="dev-release">Step 6: Create a Dev Release<a class="headerlink" href="#dev-release" title="Permanent link">&para;</a></h2>
<p>All the elements needed to create a dev release should now be in place.</p>
<h3 id="dev-release-release">Release<a class="headerlink" href="#dev-release-release" title="Permanent link">&para;</a></h3>
<p>For the dev release, use the <code class="codehilite">--force</code> option with the <code class="codehilite">bosh create-release</code>
command.
This forces BOSH to use the local copies of our blobs.</p>
<p>Without the <code class="codehilite">--force</code> option, BOSH requires blobs to be uploaded before you
run <code class="codehilite">bosh create-release</code>.
For a final release, we upload blobs, but not for a dev release.</p>
<p>Create the dev release:</p>
<p><code class="codehilite">bosh create-release --force</code></p>
<p>BOSH prompts for a release name, and assigns a dot-number version to the release.</p>
<h3 id="dev-release-deploy">Deploy the Dev Release<a class="headerlink" href="#dev-release-deploy" title="Permanent link">&para;</a></h3>
<p>Deploying the release requires three or more steps, depending on whether
BOSH is targeting the desired Director, and whether BOSH is already pointing
to a release.</p>
<p>See what director BOSH is targeting:</p>
<p><code class="codehilite">bosh env</code></p>
<p>Target a director:</p>
<p><code class="codehilite">bosh -e &lt;director_alias&gt; log-in</code></p>
<p>See what releases are available:</p>
<p><code class="codehilite">bosh releases</code></p>
<p>If BOSH is already pointing to a release, edit the BOSH deployment manifest.
Otherwise, create a manifest. See <a href="../deployment-manifest.html">BOSH Deployment Manifest</a> for more information.
Simple manifest for <code class="codehilite">ardo_app</code> can be found <a href="https://gist.github.com/antonsoroko/3be4c70b38f846b1d79eca7192a5ab58">here</a> (OpenStack) or <a href="https://gist.github.com/uzzz/9ad9cad105032fecdbeb223798607a87">here</a> (AWS).</p>
<p>Upload the new dev release.</p>
<p><code class="codehilite">bosh upload-release</code></p>
<p>Assuming you are in the release directory, no path is needed with the above command.</p>
<p>Deploy:</p>
<p><code class="codehilite">bosh deploy</code></p>
<h3 id="dev-release-test">Test the Dev Release<a class="headerlink" href="#dev-release-test" title="Permanent link">&para;</a></h3>
<p>What tests to run depends on the software you are releasing.</p>
<p>Start by opening a separate terminal, logging in on the job VM, and observing
logging output as you test your release.</p>
<p>If your release fails tests, follow this pattern.</p>
<ul>
<li>Fix the code.</li>
<li>Do a new dev release.</li>
<li>Run <code class="codehilite">bosh deploy</code> to see whether the new release deploys successfully.</li>
</ul>
<p>Using <code class="codehilite">bosh deploy --recreate</code> can provide a clearer picture because with that option,
BOSH deploys all the VMs from scratch.</p>
<hr />
<h2 id="final-release">Create a Final Release<a class="headerlink" href="#final-release" title="Permanent link">&para;</a></h2>
<p>Only proceed to this step if your latest dev release passes all tests.</p>
<h3 id="upload-blobs">Upload blobs<a class="headerlink" href="#upload-blobs" title="Permanent link">&para;</a></h3>
<p>When you use the <code class="codehilite">bosh create-release --force</code> command to create them, dev
releases depend on locally-stored blobs.
To do a final release, you must upload blobs first.</p>
<p>If files that you need to keep private are uploaded to a public blobstore,
there is no satisfactory way to undo the mistake.
To avoid this situation, complete the following steps immediately before
you upload blobs:</p>
<ol>
<li>
<p>Run <code class="codehilite">bosh blobs</code> to see the list of blobs BOSH is prepared to upload</p>
</li>
<li>
<p>Proofread the list of blobs displayed by the command</p>
</li>
<li>
<p>The list should include only the blobs you need for the final release</p>
</li>
<li>
<p>If the list includes any files that should not be uploaded, find and delete
the symbolic links to them in the <code class="codehilite">blobs</code> directory</p>
</li>
</ol>
<p>To upload your blobs, run:</p>
<p><code class="codehilite">bosh upload-blobs</code></p>
<h3 id="final-commit-two">Commit<a class="headerlink" href="#final-commit-two" title="Permanent link">&para;</a></h3>
<p>The <code class="codehilite">bosh upload-blobs</code> command has now populated the <code class="codehilite">blobs.yml</code> file
in the <code class="codehilite">config</code> directory with metadata for uploaded blobs.</p>
<p>This is a good reason to commit.</p>
<h3 id="final-release-release">Release<a class="headerlink" href="#final-release-release" title="Permanent link">&para;</a></h3>
<p>Run:</p>
<p><code class="codehilite">bosh create-release --final</code></p>
<p>BOSH prompts you for a release name, and assigns a whole-number version to the release.</p>
<p>This is a good time to push your code to a shared repository to give others access to
your final release.</p>
<h3 id="final-release-commit">Commit<a class="headerlink" href="#final-release-commit" title="Permanent link">&para;</a></h3>
<p>Do one more commit before you deploy!</p>
<h3 id="final-release-deploy">Deploy the Final Release<a class="headerlink" href="#final-release-deploy" title="Permanent link">&para;</a></h3>
<p>Run:</p>
<p><code class="codehilite">bosh deploy</code></p>
                
                  
                
              
  

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../cli-v2-diff/" title="From the Ruby CLI" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                From the Ruby CLI
              </span>
            </div>
          </a>
        
        
          <a href="../links-properties/" title="Sharing Properties" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Sharing Properties
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/cloudfoundry/bosh" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://cloudfoundry.slack.com/messages/C02HPPYQ2/" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>