# Connecting to BOSH Environments

## Overview

When you have a new BOSH Director, one of the first things you will want to do is talk to it with the CLI. Regardless of how you created the director, you will need a few pieces of information:

 * **Address** - the hostname or IP address where the director is running.
 * **CA Certificate** - all communication with the director is secured by TLS. Since most environments use self-signed certificates, you will need the self-signed CA certificate which was used for the certificate.
 * **Authentication Credentials** - the client user and secret for authenticating with the director.

!!! note
    These examples will refer to settings generated by [Deploying BOSH Director with VirtualBox](../../bosh-deployment/guide/virtualbox/installation.md). For other directors, the commands will be the same, but you may find values coming from slightly different sources.


## Aliasing an Environment

The first step when connecting to an environment is to use the `alias-env` command. This is how we define a short, memorable name for a particular Address and CA Certificate.

Here, we use the `virtualbox` alias to refer to a director running at `192.168.50.6`; and we use the `interpolate` command to extract the CA Certificate generated in `creds.yml` by [bosh-deployment](https://github.com/cloudfoundry/bosh-deployment).

```shell
$ bosh alias-env virtualbox \
  --environment 192.168.50.6 \
  --ca-cert <( bosh interpolate creds.yml --path /director_ssl/ca )
```

Once you have aliased an environment, you do not need to alias it again in future sessions.


## Listing Environments

By using the `envs` command, we can verify that our environment is now remembered by BOSH. This is also useful if we need to double check how we aliased an environment in the past.

```shell
$ bosh envs
URL           Alias       
192.168.50.6  virtualbox  
```


## Configuring Authentication

Now that `bosh` is aware of our Director, we need to tell it how to authenticate. In most cases, it is easiest to configure the credentials through the `BOSH_CLIENT` and `BOSH_CLIENT_SECRET` environment variables.

Similar to how we used `interpolate` to extract the CA Certificate, we will do the same to get the generated password from `creds.yml`:

```shell
$ export BOSH_CLIENT=admin
$ export BOSH_CLIENT_SECRET=$( bosh interpolate creds.yml --path /admin_password )
```

Once the credentials are available to `bosh`, we can run the `env` command to verify the `User` shows we are indeed `admin`. Note that we are still specifying our environment alias with `-e virtualbox` to make sure the CLI knows which director we want to communicate with:

```shell
$ bosh -e virtualbox env
Using environment '192.168.50.6' as client 'admin'

Name      virtualbox  
...
User      admin  
```

!!! note
    BOSH also supports interactive login and federated identities through Cloud Foundry UAA. If you are interested in learning more about that integration and login workflow, please refer to the [Integrating with UAA](../../todo.md) guide.


## Simplifying Environment Settings

Now that we have successfully connected to Director, we should simplify the process. One common convention is to document all of these settings in an `.envrc` file. This way, you can easily `source .envrc` to reset the Director connection configuration.

```shell
export BOSH_ENVIRONMENT=virtualbox
export BOSH_CA_CERTIFICATE=$( bosh interpolate creds.yml --path /director_ssl/ca )
export BOSH_CLIENT=admin
export BOSH_CLIENT_SECRET=$( bosh interpolate creds.yml --path /admin_password )
```

!!! tip
    If you are a [direnv](https://direnv.net/) user, these connection settings can automatically be loaded when you `cd` into your directory.
